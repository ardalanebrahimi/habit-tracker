<div class="today">
  <!-- Two-segment pill navigation -->
  <div class="pill-navigation">
    <div class="pill-container">
      <button
        class="pill-segment"
        [class.active]="currentView === 'myHabits'"
        (click)="setView('myHabits')"
      >
        <span class="pill-icon">🏷</span>
        <span class="pill-text">My</span>
      </button>
      <button
        class="pill-segment"
        [class.active]="currentView === 'friends'"
        (click)="setView('friends')"
      >
        <span class="pill-icon">🤝</span>
        <span class="pill-text">Friends</span>
      </button>
    </div>
  </div>

  <div
    *ngIf="filteredHabits.length === 0 && currentView === 'myHabits'"
    class="done-message"
  >
    <p>🎉 Great job! You've completed all your tasks for today! 🎉</p>
    <p>Enjoy your day or keep up the streak tomorrow! 🌟</p>
  </div>

  <!-- My Habits -->
  <div *ngIf="currentView === 'myHabits'">
    <div class="toggle-switch">
      <label class="switch">
        <input
          type="checkbox"
          [checked]="showAllOwnedHabits"
          (change)="toggleAllOwnedHabits()"
        />
        <span class="slider"></span>
      </label>
      <span>{{ showAllOwnedHabits ? "All" : "Remaining" }}</span>
    </div>

    <app-habit-card
      class="habit-item"
      *ngFor="let habit of filteredHabits"
      [habit]="habit"
      [class.friend-habit]="!habit.isOwnedHabit"
      (habitChanged)="fetchTodayHabits()"
    ></app-habit-card>
  </div>

  <!-- Friends' Habits -->
  <div *ngIf="currentView === 'friends'" class="friends-habits">
    <div *ngIf="isLoading" class="loading">Loading friends' habits...</div>
    <div *ngIf="!isLoading && friendHabits.length === 0" class="no-habits">
      <p>No friends' habits to display.</p>
    </div>
    <app-habit-card
      class="habit-item"
      *ngFor="let habit of friendHabits"
      [habit]="habit"
      [isReadOnly]="true"
      (habitChanged)="fetchFriendHabits()"
    ></app-habit-card>
  </div>

  <button class="fab" routerLink="/add-habit">+</button>
</div>
