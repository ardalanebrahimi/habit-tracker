<div class="today">
  <div class="page-header">
    <h2>ğŸ“… Today's Habits</h2>
  </div>

  <div class="view-options">
    <a
      (click)="setView('remaining')"
      [class.active]="currentView === 'remaining'"
      >Remaining</a
    >
    |
    <a (click)="setView('all')" [class.active]="currentView === 'all'">All</a>
    |
    <a (click)="setView('done')" [class.active]="currentView === 'done'"
      >Done</a
    >
    |
    <a (click)="setView('friends')" [class.active]="currentView === 'friends'"
      >Friends</a
    >
  </div>

  <div
    *ngIf="filteredHabits.length === 0 && currentView === 'remaining'"
    class="done-message"
  >
    <p>ğŸ‰ Great job! You've completed all your tasks for today! ğŸ‰</p>
    <p>Enjoy your day or keep up the streak tomorrow! ğŸŒŸ</p>
  </div>

  <!-- My Habits -->
  <div *ngIf="currentView !== 'friends'">
    <app-habit-card
      class="habit-item"
      *ngFor="let habit of filteredHabits"
      [habit]="habit"
      [class.friend-habit]="habit.isFriendsHabit"
      (habitChanged)="fetchTodayHabits()"
    ></app-habit-card>
  </div>

  <!-- Friends' Habits -->
  <div *ngIf="currentView === 'friends'" class="friends-habits">
    <div *ngIf="isLoading" class="loading">Loading friends' habits...</div>
    <div *ngIf="!isLoading && friendHabits.length === 0" class="no-habits">
      <p>No friends' habits to display.</p>
    </div>
    <app-habit-card
      class="habit-item"
      *ngFor="let habit of friendHabits"
      [habit]="habit"
      [isReadOnly]="true"
      (habitChanged)="fetchFriendHabits()"
    ></app-habit-card>
  </div>

  <button class="fab" routerLink="/add-habit">+</button>
</div>
